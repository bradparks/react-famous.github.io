webpackJsonp([20],{210:function(t,e,n){!function(){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=e(n(103)),a=e(n(274)),u=e(n(275)),c=e(n(276)),p=e(n(277)),h=e(n(256)),l=e(n(257)),f=e(n(4)),d=e(n(109)),v=e(n(110)),_=e(n(111)),g=e(n(112)),y=e(n(282)),m=10,b="surface_";a.register({mouse:u,touch:c});var O=function(t){var e=function(){r(this,e),null!=t&&t.apply(this,arguments)};return o(e,t),i(e,{componentDidMount:{value:function(){var t=this,e=this.refs.clickSurface.getFamous(),n=this.refs.renderController.getFamous(),i=Object.keys(this.refs).filter(function(t){return h(t,b)}).map(function(e){return t.refs[e].getFamous()}),o=new a({mouse:{},touch:{}}),r=0;o.on("end",p(function(){var t=(r+1)%i.length;n.show(i[t]),r+=1}),100),e.pipe(o),g.schedule(function(){i[0]&&n.show(i[0])})}},render:{value:function(){var t=l(m).map(function(t){var e={size:[200,200],properties:{backgroundColor:"hsl("+360*t/m+", 100%, 50%)",lineHeight:"200px",textAlign:"center"}};return f.createElement(_,{key:t,ref:""+b+t,options:e},"Surface: ",t+1)});return f.createElement(d,null,f.createElement(_,{options:{properties:{lineHeight:"100px",textAlign:"center"},size:[void 0,100]}},"Click anywhere on the screen."),f.createElement(v,{options:{align:[.5,.5],origin:[.5,.5]}},f.createElement(y,{ref:"renderController"},t)),f.createElement(v,{options:{transform:s.inFront}},f.createElement(_,{ref:"clickSurface"})))}}}),e}(f.Component);t.exports=O}()},256:function(t,e,n){function i(t,e,n){return t=o(t),n=null==n?0:r(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}var o=n(306),r=Math.min;t.exports=i},257:function(t,e,n){function i(t,e,n){n&&o(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,a=s(r((e-t)/(n||1)),0),u=Array(a);++i<a;)u[i]=t,t+=n;return u}var o=n(307),r=Math.ceil,s=Math.max;t.exports=i},274:function(t,e,n){function i(t,e){this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function o(t,e){s[t]&&(this._syncs[t]=new s[t](e),this.pipeSync(t))}var r=n(243);i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DIRECTION_Z=2;var s={};i.register=function(t){for(var e in t)if(s[e]){if(s[e]!==t[e])throw new Error("Conflicting sync classes for key: "+e)}else s[e]=t[e]},i.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},i.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},i.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},i.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)o.call(this,t[e]);else if(t instanceof Object)for(var n in t)o.call(this,n,t[n])},t.exports=i},275:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._eventInput=new u,this._eventOutput=new u,u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",o.bind(this)),this._eventInput.on("mousemove",r.bind(this)),this._eventInput.on("mouseup",s.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",s.bind(this)),this.options.clickThreshold&&window.addEventListener("click",function(t){Math.sqrt(Math.pow(this._displacement[0],2)+Math.pow(this._displacement[1],2))>this.options.clickThreshold&&t.stopPropagation()}.bind(this),!0),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._displacement=[0,0],this._documentActive=!1}function o(t){var e,n;this.options.preventDefault&&t.preventDefault();var i=t.clientX,o=t.clientY;this._prevCoord=[i,o],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]),this.options.clickThreshold&&(this._displacement=[0,0]);var r=this._payload;r.delta=e,r.position=this._position,r.velocity=n,r.clientX=i,r.clientY=o,r.offsetX=t.offsetX,r.offsetY=t.offsetY,this._positionHistory.push({position:r.position.slice?r.position.slice(0):r.position,time:this._prevTime}),this._eventOutput.emit("start",r),this._documentActive=!1}function r(t){if(this._prevCoord){var e=this._prevCoord,n=(this._prevTime,t.clientX),o=t.clientY,r=Date.now(),s=n-e[0],a=o-e[1];this.options.rails&&(Math.abs(s)>Math.abs(a)?a=0:s=0);var u,c,h=Math.max(r-this._positionHistory[0].time,p),l=this.options.scale;this.options.direction===i.DIRECTION_X?(c=l*s,this._position+=c,u=l*(this._position-this._positionHistory[0].position)/h):this.options.direction===i.DIRECTION_Y?(c=l*a,this._position+=c,u=l*(this._position-this._positionHistory[0].position)/h):(c=[l*s,l*a],u=[l*(this._position[0]-this._positionHistory[0].position[0])/h,l*(this._position[1]-this._positionHistory[0].position[1])/h],this._position[0]+=c[0],this._position[1]+=c[1]),this.options.clickThreshold!==!1&&(this._displacement[0]+=s,this._displacement[1]+=a);var f=this._payload;f.delta=c,f.position=this._position,f.velocity=u,f.clientX=n,f.clientY=o,f.offsetX=t.offsetX,f.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:r}),this._eventOutput.emit("update",f),this._prevCoord=[n,o],this._prevTime=r,this._move=!0}}function s(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function a(t){if(this._down&&this._move&&!this._documentActive){var e=r.bind(this),n=function(t){s.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),this._documentActive=!0}}var u=n(243),c=n(244);i.DEFAULT_OPTIONS={clickThreshold:void 0,direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var p=8;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},t.exports=i},276:function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a({touchLimit:this.options.touchLimit}),u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",o.bind(this)),this._touchTracker.on("trackmove",r.bind(this)),this._touchTracker.on("trackend",s.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function o(t){var e,n;void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]);var i=this._payload;i.delta=n,i.position=this._position,i.velocity=e,i.clientX=t.x,i.clientY=t.y,i.count=t.count,i.touch=t.identifier,this._eventOutput.emit("start",i)}function r(t){var e=t.history,n=e[e.length-1],o=e[e.length-2],r=e[e.length-this.options.velocitySampleLength]?e[e.length-this.options.velocitySampleLength]:e[e.length-2],s=r.timestamp,a=n.timestamp,u=n.x-o.x,c=n.y-o.y,h=n.x-r.x,l=n.y-r.y;this.options.rails&&(Math.abs(u)>Math.abs(c)?c=0:u=0,Math.abs(h)>Math.abs(l)?l=0:h=0);var f,d,v=Math.max(a-s,p),_=h/v,g=l/v,y=this.options.scale;this.options.direction===i.DIRECTION_X?(d=y*u,f=y*_,this._position+=d):this.options.direction===i.DIRECTION_Y?(d=y*c,f=y*g,this._position+=d):(d=[y*u,y*c],f=[y*_,y*g],this._position[0]+=d[0],this._position[1]+=d[1]);var m=this._payload;m.delta=d,m.velocity=f,m.position=this._position,m.clientX=t.x,m.clientY=t.y,m.count=t.count,m.touch=t.identifier,this._eventOutput.emit("update",m)}function s(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=n(329),u=n(243),c=n(244);i.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},i.DIRECTION_X=0,i.DIRECTION_Y=1;var p=8;i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.prototype.getOptions=function(){return this.options},t.exports=i},277:function(t,e,n){function i(t,e,n){var i=!0,u=!0;if("function"!=typeof t)throw new TypeError(s);return n===!1?i=!1:r(n)&&(i="leading"in n?!!n.leading:i,u="trailing"in n?!!n.trailing:u),a.leading=i,a.maxWait=+e,a.trailing=u,o(t,e,a)}var o=n(327),r=n(107),s="Expected a function",a={leading:!1,maxWait:0,trailing:!1};t.exports=i},282:function(t,e,n){!function(){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=e(n(248)),a=e(n(331)),u=e(n(163)),c=e(n(4)),p=e(n(167)),h=function(t){function e(){r(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{famousCreate:{value:function(){return new a(this.props.options)}},famousCreateNode:{value:function(t){var e=this.getFamous(),n=t.add(e),i=this.getFamousChildrenRef().map(function(t){return[t,new s]});return[n,i]}},famousUpdate:{value:function(t){var e=this.getFamous();e.setOptions(t.options)}},render:{value:function(){return c.createElement("div",{"data-famous":"RenderController"},this.getFamousChildren())}}}),e}(p);u(h,a),t.exports=h}()},327:function(t,e,n){function i(t,e,n){function i(){_&&clearTimeout(_),l&&clearTimeout(l),l=_=g=void 0}function u(){var n=e-(r()-d);if(0>=n||n>e){l&&clearTimeout(l);var i=g;l=_=g=void 0,i&&(y=r(),f=t.apply(v,h),_||l||(h=v=null))}else _=setTimeout(u,n)}function c(){_&&clearTimeout(_),l=_=g=void 0,(b||m!==e)&&(y=r(),f=t.apply(v,h),_||l||(h=v=null))}function p(){if(h=arguments,d=r(),v=this,g=b&&(_||!O),m===!1)var n=O&&!_;else{l||O||(y=d);var i=m-(d-y),o=0>=i||i>m;o?(l&&(l=clearTimeout(l)),y=d,f=t.apply(v,h)):l||(l=setTimeout(c,i))}return o&&_?_=clearTimeout(_):_||e===m||(_=setTimeout(u,e)),n&&(o=!0,f=t.apply(v,h)),!o||_||l||(h=v=null),f}var h,l,f,d,v,_,g,y=0,m=!1,b=!0;if("function"!=typeof t)throw new TypeError(s);if(e=0>e?0:+e||0,n===!0){var O=!0;b=!1}else o(n)&&(O=n.leading,m="maxWait"in n&&a(+n.maxWait||0,e),b="trailing"in n?n.trailing:b);return p.cancel=i,p}var o=n(107),r=n(356),s="Expected a function",a=Math.max;t.exports=i},329:function(t,e,n){function i(t,e,n){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:p(),count:e.touches.length,history:n}}function o(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],o=i(n,t,null);this.eventOutput.emit("trackstart",o),this.selective||this.touchHistory[n.identifier]||this.track(o)}}}function r(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],o=this.touchHistory[n.identifier];if(o){var r=i(n,t,o);this.touchHistory[n.identifier].push(r),this.eventOutput.emit("trackmove",r)}}}function s(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],o=this.touchHistory[n.identifier];if(o){var r=i(n,t,o);this.eventOutput.emit("trackend",r),delete this.touchHistory[n.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",r.bind(this)),this.eventInput.on("touchend",s.bind(this)),this.eventInput.on("touchcancel",s.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var c=n(243),p=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},t.exports=u},331:function(t,e,n){function i(){c.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=i.DefaultMap.transform,this.inOpacityMap=i.DefaultMap.opacity,this.inOriginMap=i.DefaultMap.origin,this.inAlignMap=i.DefaultMap.align,this.outTransformMap=i.DefaultMap.transform,this.outOpacityMap=i.DefaultMap.opacity,this.outOriginMap=i.DefaultMap.origin,this.outAlignMap=i.DefaultMap.align,this._output=[]}function o(t,e){return t(e.get())}var r=n(165),s=n(248),a=n(103),u=n(246),c=n(357);i.prototype=Object.create(c.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},i.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null,align:null},i.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},i.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},i.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},i.prototype.inAlignFrom=function(t){if(t instanceof Function)this.inAlignMap=t;else{if(!t||!t.get)throw new Error("inAlignFrom takes only function or getter object");this.inAlignMap=t.get.bind(t)}return this},i.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},i.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},i.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},i.prototype.outAlignFrom=function(t){if(t instanceof Function)this.outAlignMap=t;else{if(!t||!t.get)throw new Error("outAlignFrom takes only function or getter object");this.outAlignMap=t.get.bind(t)}return this},i.prototype.show=function(t,e,n){if(!t)return this.hide(n);if(e instanceof Function&&(n=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,n),this._nextRenderable=null})));this.hide()}var i=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,i=this._states[a],i.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{i=new u(0);var p=new r({transform:this.inTransformMap?o.bind(this,this.inTransformMap,i):null,opacity:this.inOpacityMap?o.bind(this,this.inOpacityMap,i):null,origin:this.inOriginMap?o.bind(this,this.inOriginMap,i):null,align:this.inAlignMap?o.bind(this,this.inAlignMap,i):null}),h=new s;h.add(p).add(t),this._showing=this._nodes.length,this._nodes.push(h),this._modifiers.push(p),this._states.push(i),this._renderables.push(t)}e||(e=this.options.inTransition),i.set(1,e,n)},i.prototype.hide=function(t,e){if(!(this._showing<0)){var n=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var i=this._nodes[n],r=this._modifiers[n],s=this._states[n],a=this._renderables[n];r.transformFrom(this.outTransformMap?o.bind(this,this.outTransformMap,s):null),r.opacityFrom(this.outOpacityMap?o.bind(this,this.outOpacityMap,s):null),r.originFrom(this.outOriginMap?o.bind(this,this.outOriginMap,s):null),r.alignFrom(this.outAlignMap?o.bind(this,this.outAlignMap,s):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),s.halt(),s.set(0,t,function(t,n,i,o){if(this._outgoingRenderables.indexOf(o)>=0){var r=this._nodes.indexOf(t);this._nodes.splice(r,1),this._modifiers.splice(r,1),this._states.splice(r,1),this._renderables.splice(r,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(o),1),this._showing>=r&&this._showing--}e&&e.call(this)}.bind(this,i,r,s,a))}},i.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},t.exports=i},356:function(t,e,n){var i=n(238),o=i(o=Date.now)&&o,r=o||function(){return(new Date).getTime()};t.exports=r},357:function(t,e,n){function i(t){this._node=new s,this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||i.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t)}var o=n(243),r=n(244),s=n(248),a=n(284);i.DEFAULT_OPTIONS={},i.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},i.prototype.setOptions=function(t){this._optionsManager.patch(t)},i.prototype.add=function(){return this._node.add.apply(this._node,arguments)},i.prototype._add=i.prototype.add,i.prototype.render=function(){return this._node.render()},i.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},t.exports=i}});